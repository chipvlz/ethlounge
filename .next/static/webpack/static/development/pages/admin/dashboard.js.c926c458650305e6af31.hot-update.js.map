{"version":3,"file":"static/webpack/static\\development\\pages\\admin\\dashboard.js.c926c458650305e6af31.hot-update.js","sources":["webpack:///./components/dashboard/Layout/Layout.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { Container } from 'semantic-ui-react';\r\nimport Head from 'next/head';\r\nimport '../../../static/css/layout.css';\r\nimport 'react-rangeslider/lib/index.css';\r\nimport axios from 'axios';\r\nimport { backend } from '../../../config/config';\r\nimport { Router, Link } from '../../../next-routes';\r\nimport CookieCall from '../../../utils/CookieCall';\r\nimport Menu from './Menu';\r\n\r\nconst dashboardLayout = ChildPage =>\r\n  class extends Component {\r\n    static async getInitialProps(initialProps) {\r\n      const { req, res } = initialProps;\r\n\r\n      let api_response;\r\n\r\n      try {\r\n        api_response = await CookieCall(req, '/api/current_user');\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n\r\n      const errorURL = '/404';\r\n      const user = api_response.data;\r\n\r\n      let isAdmin;\r\n      if (!user) isAdmin = false;\r\n      else isAdmin = api_response.data.permissions.includes('admin');\r\n\r\n      if (!isAdmin) {\r\n        if (res) {\r\n          res.writeHead(302, {\r\n            Location: errorURL\r\n          });\r\n          res.end();\r\n        } else {\r\n          Router.pushRoute(errorURL);\r\n        }\r\n      }\r\n\r\n      let props = { user: user };\r\n\r\n      const getInitialProps = ChildPage.getInitialProps;\r\n\r\n      if (getInitialProps) {\r\n        let childPageProps = await getInitialProps(initialProps);\r\n\r\n        props = {\r\n          ...props,\r\n          ...childPageProps\r\n        };\r\n      }\r\n\r\n      return props;\r\n    }\r\n\r\n    render() {\r\n      return (\r\n        <Container fluid className=\"main-container\">\r\n          <Head>\r\n            <link\r\n              rel=\"stylesheet\"\r\n              href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.3/semantic.min.css\"\r\n            />\r\n          </Head>\r\n          <Menu user={this.props.user} />\r\n          <Container>\r\n            <ChildPage initial={this.props} />\r\n          </Container>\r\n          <div className=\"footer\" />\r\n        </Container>\r\n      );\r\n    }\r\n  };\r\n\r\nexport default dashboardLayout;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAgDA;AACA;AAAA;AAAA;AAGA;AACA;AAFA;AAKA;AAAA;AAEA;AAAA;AAEA;AAAA;AAGA;AA/DA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAHA;AAAA;AAAA;AACA;AADA;AAQA;AARA;AAAA;AACA;AADA;AAAA;AAAA;AAUA;AACA;AAXA;AAaA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAlCA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAoCA;AAEA;AACA;AAvCA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAiEA;;;;A","sourceRoot":""}